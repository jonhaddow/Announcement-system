@model IEnumerable<Coursework.Models.Announcement>

@{
    ViewBag.Title = "Announcements";
}

<div id="loadingSpinner">
    <img src="~/Content/ring.svg" />
</div>

<div class="sidebar col-sm-4">
    <h2>@ViewBag.Title</h2>
    @if (ViewBag.isLecturer)
    {
        <div class="create-announcement-link" id="createAnnouncementLink">
            Create New
        </div>
    }

    @foreach (var item in Model)
    {
        using (Ajax.BeginForm("GetAnnouncement", "Announcements", "", new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "POST",
            UpdateTargetId = "selectedAnnouncement",
            LoadingElementId = "loadingSpinner"
        }, new { id = "addCommentForm" }))
        {
            <input hidden name="announcementId" value="@item.Id" />
            <button id="@item.Id" class="announcement-link" onclick="getAnnouncement(this);" type="submit">@item.Content<i class="material-icons">keyboard_arrow_right</i></button>
        }
    }
</div>

<div id="selectedAnnouncement" class="outline col-sm-8"></div>

@section Styles {
    <link href="@Url.Content("~/Content/announcements.css")" rel="stylesheet" type="text/css" />
}
@section Scripts {
    <script src="~/CustomScripts/indexAnnouncement.js"></script>
    <script src="~/Scripts/sweetalert.min.js"></script>
}
